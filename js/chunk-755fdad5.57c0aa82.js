(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-755fdad5"],{"2fef":function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e._self._c;return r("div",{staticClass:"auth-container"},[e.showLogin?r("div",{staticClass:"auth-form"},[r("h2",[e._v("登录")]),r("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.loginRules}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"用户名"},model:{value:e.loginForm.username,callback:function(r){e.$set(e.loginForm,"username",r)},expression:"loginForm.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.loginForm.password,callback:function(r){e.$set(e.loginForm,"password",r)},expression:"loginForm.password"}})],1),r("el-button",{staticClass:"auth-btn",attrs:{type:"primary"},on:{click:e.handleLogin}},[e._v("登录")])],1),r("p",{staticClass:"toggle-auth",on:{click:function(r){e.showLogin=!1}}},[e._v("还没有账号？立即注册")])],1):r("div",{staticClass:"auth-form"},[r("h2",[e._v("注册")]),r("el-form",{ref:"registerForm",attrs:{model:e.registerForm,rules:e.registerRules}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"用户名"},model:{value:e.registerForm.username,callback:function(r){e.$set(e.registerForm,"username",r)},expression:"registerForm.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.registerForm.password,callback:function(r){e.$set(e.registerForm,"password",r)},expression:"registerForm.password"}})],1),r("el-form-item",{attrs:{prop:"confirmPassword"}},[r("el-input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:e.registerForm.confirmPassword,callback:function(r){e.$set(e.registerForm,"confirmPassword",r)},expression:"registerForm.confirmPassword"}})],1),r("el-button",{staticClass:"auth-btn",attrs:{type:"primary"},on:{click:e.handleRegister}},[e._v("注册")])],1),r("p",{staticClass:"toggle-auth",on:{click:function(r){e.showLogin=!0}}},[e._v("已有账号？立即登录")])],1)])},o=[],a=(s("d9e2"),s("14d9"),s("bc3a")),i=s.n(a),n={data(){const e=(e,r,s)=>{""===r?s(new Error("请输入密码")):r.length<6?s(new Error("密码不能少于6位")):(""!==this.registerForm.confirmPassword&&this.$refs.registerForm.validateField("confirmPassword"),s())},r=(e,r,s)=>{""===r?s(new Error("请再次输入密码")):r!==this.registerForm.password?s(new Error("两次输入密码不一致!")):s()};return{showLogin:!0,loginForm:{username:"",password:""},registerForm:{username:"",password:"",confirmPassword:""},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},registerRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{validator:e,trigger:"blur"}],confirmPassword:[{validator:r,trigger:"blur"}]}}},methods:{handleLogin(){this.$refs.loginForm.validate(e=>{e&&i.a.get("http://localhost:3004/users",{params:{username:this.loginForm.username,password:this.loginForm.password}}).then(e=>{e.data.length>0?(this.$message({message:"登录成功",type:"success",duration:1e3}),localStorage.setItem("user",JSON.stringify(e.data[0])),this.$router.push("/")):this.$message({message:"用户名或密码错误",type:"error",duration:1e3})}).catch(e=>{console.error(e),this.$message({message:"登录失败",type:"error",duration:1e3})})})},handleRegister(){this.$refs.registerForm.validate(e=>{e&&i.a.get("http://localhost:3004/users",{params:{username:this.registerForm.username}}).then(e=>{e.data.length>0?this.$message({message:"用户名已存在",type:"error",duration:1e3}):i.a.post("http://localhost:3004/users",{username:this.registerForm.username,password:this.registerForm.password}).then(()=>{this.$message({message:"注册成功",type:"success",duration:1e3}),this.showLogin=!0}).catch(e=>{console.error(e),this.$message({message:"注册失败",type:"error",duration:1e3})})})})}}},l=n,m=(s("99c7"),s("0c7c")),u=Object(m["a"])(l,t,o,!1,null,"4eb7ea5b",null);r["default"]=u.exports},"99c7":function(e,r,s){"use strict";s("ce2e")},ce2e:function(e,r,s){}}]);
//# sourceMappingURL=chunk-755fdad5.57c0aa82.js.map